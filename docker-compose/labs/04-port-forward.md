# Практическое задание 4. Проектирование веб-сервера.

Скачать образ Docker `nginx` из Docker Hub. Этот образ Docker использует веб-сервер [Nginx](http://nginx.org/) для обслуживания статического HTML-сайта.

Запустите новый контейнер из образа `nginx`, который предоставляет порт 80 на хосте через порт контейнера 8080. Требуется использовать флаг `-p` с командой Docker-контейнера.

> :bulb: Сопоставление портов между хост-компьютером и контейнерами может сбить с толку.
> Вот синтаксис, который можно использовать:
>
> ```
> docker run -p 8080:80 nginx
> ```
>
> Хитрость в том, чтобы помнить, что **хост-порт всегда идет слева**,
> и **контейнерный порт всегда идет справа.**
> Помните coming _from_ хост, _to_ контейнер.

Откройте веб-браузер и перейдите на порт 8080 на рабочем хосте. Точный адрес будет зависеть от того, как используется Docker:

- **Native Linux** - [http://localhost:8080](http://localhost:8080).
– **Google Cloud Shell** – Открыть предварительный просмотр в Интернете (правый верхний угол).

Если видите веб-страницу с надписью «Welcome to nginx!» тогда все готово!

Если вы посмотрите на вывод консоли из Docker, будет видно, что nginx создает строку текста каждый раз, когда браузер заходит на веб-страницу:

```
docker run -p 8080:80 nginx
```

Ожидаемый результат:

```
172.17.0.1 - - [27/Jan/2024:22:38:27 +0000] "GET /?authuser=0&redirectedPreviously=true HTTP/1.1" 200 615 "https://ssh.cloud.google.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" "-"
```

Нажмите **control + c** в окне терминала, чтобы остановить контейнер.

## Запуск контейнера веб-сервера в фоновом режиме

При запуске веб-сервера, такого как nginx, правильно не запускать контейнер на переднем плане нашего терминала.
Вместо этого следует заставить его работать в фоновом режиме, освободив терминал для других задач.
Docker включает это с помощью параметра `-d` для команды `run`.
Например: `docker run -d -p 8080:80 nginx`

```
docker run -p 8080:80 -d nginx
```

## Очистка

Остановить контейнер, который  запустили.
Помните, что идентификатор вашего контейнера отличается от приведенного в примере.

```bash
docker stop 37a7e850f76bbad240a024427e66903f0d9d9543f0d7b2deb83f98d1ab62bb0c
```
Docker выводит в консоль идентификатор остановленного контейнера.

```
37a7e850f76bbad240a024427e66903f0d9d9543f0d7b2deb83f98d1ab62bb0c
```
